<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FOV MATCH APP</title>

<style>
  :root{
    --bg:#050505;
    --card:#111111;
    --border:#262626;
    --text:#ffffff;
    --muted:#9a9a9a;
    --button:#ffffff;
    --buttonText:#000000;
  }
  *{box-sizing:border-box}

  html, body{
    height:100%;
  }

  body{
    margin:0;
    padding:16px;
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial;
    background:var(--bg);
    color:var(--text);
  }

  .app{
    min-height:100%;
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    max-width:900px;
    margin:0 auto;
  }

  h1{
    font-size:34px;
    letter-spacing:1px;
    margin:8px 0 20px;
  }

  .card{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:22px;
    padding:22px;
    margin-bottom:18px;
  }

  .grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:18px;
  }

  label{
    display:block;
    font-size:13px;
    letter-spacing:1px;
    color:var(--muted);
    margin-bottom:8px;
  }

  input{
    width:100%;
    padding:20px 16px;
    font-size:26px;
    font-weight:600;
    color:var(--text);
    background:#0b0b0b;
    border:2px solid var(--border);
    border-radius:16px;
    outline:none;
  }

  input::placeholder{
    font-size:18px;
    font-weight:400;
    color:#666;
  }

  input:focus{
    border-color:#ffffff;
  }

  input.solvedTarget{
    border-color:#ffffff;
    font-weight:800;
  }

  button{
    width:100%;
    margin-top:22px;
    padding:22px;
    font-size:22px;
    font-weight:900;
    letter-spacing:1.5px;
    border-radius:20px;
    border:none;
    background:var(--button);
    color:var(--buttonText);
    cursor:pointer;
  }

  button:active{
    transform:scale(.985);
  }

  .resultCard{
    margin-top:auto;
  }

  .out{
    font-size:26px;
    font-weight:900;
  }

  .muted{
    margin-top:10px;
    font-size:15px;
    color:var(--muted);
    letter-spacing:.5px;
  }

  .bold{font-weight:900;}
</style>
</head>

<body>
<div class="app">

  <div>
    <h1>FOV MATCH APP</h1>

    <div class="card">
      <div class="grid">
        <div>
          <label>A LENS (mm)</label>
          <input id="aLens" type="number" step="1" min="1" placeholder="36">
        </div>

        <div>
          <label>B LENS (mm)</label>
          <input id="bLens" type="number" step="1" min="1" placeholder="110">
        </div>

        <div>
          <label>A DISTANCE</label>
          <input id="aDist" placeholder="6’7”">
        </div>

        <div>
          <label>B DISTANCE</label>
          <input id="bDist" placeholder="leave blank">
        </div>
      </div>

      <button id="calcBtn">CALCULATE</button>
    </div>
  </div>

  <div class="card resultCard">
    <div class="out" id="result">—</div>
    <div class="muted" id="detail">
      Enter any 3 fields, leave 1 blank, press CALCULATE.
    </div>
  </div>

</div>

<script>
  const el = id => document.getElementById(id);
  const isBlank = s => s === null || s === undefined || String(s).trim() === "";

  function normalizeInput(s){
    return String(s)
      .replace(/[’′]/g,"'")
      .replace(/[“”″]/g,'"')
      .replace(/feet|foot/g,"ft")
      .replace(/inches|inch/g,"in")
      .toLowerCase()
      .trim();
  }

  function parseDistanceToInches(raw){
    if (isBlank(raw)) return NaN;
    let s = normalizeInput(raw).replace(/\s+/g," ");

    let m;
    if (m = s.match(/^(\d+(?:\.\d+)?)\s*(in|")$/)) return +m[1];
    if (m = s.match(/^(\d+(?:\.\d+)?)\s*(ft|')\s*(\d+(?:\.\d+)?)?/))
      return (+m[1] * 12) + (m[3] ? +m[3] : 0);
    if (m = s.match(/^(\d+(?:\.\d+)?)\s+(\d+(?:\.\d+)?)$/))
      return (+m[1] * 12) + (+m[2]);
    if (m = s.match(/^(\d+(?:\.\d+)?)$/)) return +m[1];

    return NaN;
  }

  function inchesToFeetInString(totalInches){
    const roundedUp = Math.ceil(totalInches);
    const ft = Math.floor(roundedUp / 12);
    const inch = roundedUp % 12;
    return `${ft}’${inch}”`;
  }

  function clearSolved(){
    ['aDist','bDist','aLens','bLens']
      .forEach(id => el(id).classList.remove('solvedTarget'));
  }

  function normalizeDistanceField(id){
    const v = el(id).value;
    if (isBlank(v)) return;
    const inches = parseDistanceToInches(v);
    if (!(inches > 0)) return;
    el(id).value = inchesToFeetInString(inches);
  }

  function solve(){
    clearSolved();
    normalizeDistanceField('aDist');
    normalizeDistanceField('bDist');

    const aD = el('aDist').value;
    const bD = el('bDist').value;
    const aL = el('aLens').value;
    const bL = el('bLens').value;

    const blanks = [
      isBlank(aL) ? 'aLens' : null,
      isBlank(bL) ? 'bLens' : null,
      isBlank(aD) ? 'aDist' : null,
      isBlank(bD) ? 'bDist' : null
    ].filter(Boolean);

    if (blanks.length !== 1) return;

    const A = parseFloat(aL);
    const B = parseFloat(bL);
    const aIn = parseDistanceToInches(aD);
    const bIn = parseDistanceToInches(bD);
    const t = blanks[0];

    if (t === 'bDist'){
      const v = inchesToFeetInString(aIn * (B / A));
      el('bDist').value = v;
      el('bDist').classList.add('solvedTarget');
      el('result').innerHTML = `B DISTANCE = <span class="bold">${v}</span>`;
      el('detail').textContent = "B DISTANCE = A DISTANCE × (B LENS ÷ A LENS)";
    }

    if (t === 'aDist'){
      const v = inchesToFeetInString(bIn * (A / B));
      el('aDist').value = v;
      el('aDist').classList.add('solvedTarget');
      el('result').innerHTML = `A DISTANCE = <span class="bold">${v}</span>`;
      el('detail').textContent = "A DISTANCE = B DISTANCE × (A LENS ÷ B LENS)";
    }

    if (t === 'bLens'){
      const v = Math.ceil(A * (bIn / aIn));
      el('bLens').value = v;
      el('bLens').classList.add('solvedTarget');
      el('result').innerHTML = `B LENS = <span class="bold">${v} mm</span>`;
      el('detail').textContent = "B LENS = A LENS × (B DISTANCE ÷ A DISTANCE)";
    }

    if (t === 'aLens'){
      const v = Math.ceil(B * (aIn / bIn));
      el('aLens').value = v;
      el('aLens').classList.add('solvedTarget');
      el('result').innerHTML = `A LENS = <span class="bold">${v} mm</span>`;
      el('detail').textContent = "A LENS = B LENS × (A DISTANCE ÷ B DISTANCE)";
    }
  }

  el('calcBtn').addEventListener('click', solve);
</script>

</body>
</html>
