<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FOV MATCH APP</title>

<style>
  :root{
    --bg:#0b0b0b;
    --card:#141414;
    --border:#262626;
    --text:#ffffff;
    --muted:#9a9a9a;
    --button:#ffffff;
    --buttonText:#000000;
  }
  *{box-sizing:border-box}
  body{
    margin:0; padding:16px;
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial;
    background:var(--bg); color:var(--text);
    max-width:820px; margin-inline:auto;
  }
  h1{
    font-size:28px;
    letter-spacing:.5px;
    margin:0 0 14px;
  }
  .card{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:16px;
    padding:16px;
    margin-bottom:16px;
  }
  .grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:14px;
  }
  label{
    display:block;
    font-size:12px;
    letter-spacing:.8px;
    color:var(--muted);
    margin-bottom:6px;
  }
  input{
    width:100%;
    padding:14px 12px;
    font-size:17px;
    color:var(--text);
    background:#0f0f0f;
    border:1px solid var(--border);
    border-radius:12px;
    outline:none;
  }
  input::placeholder{color:#666;}
  input:focus{border-color:#fff;}
  input.solvedTarget{
    border:2px solid #fff;
    font-weight:700;
  }
  button{
    width:100%;
    margin-top:16px;
    padding:16px;
    font-size:17px;
    font-weight:800;
    letter-spacing:1px;
    border-radius:14px;
    border:none;
    background:var(--button);
    color:var(--buttonText);
    cursor:pointer;
  }
  button:active{transform:scale(.99);}
  .out{
    font-size:18px;
    font-weight:700;
  }
  .muted{
    margin-top:6px;
    font-size:13px;
    color:var(--muted);
  }
  .bold{font-weight:900;}
</style>
</head>

<body>

<h1>FOV MATCH APP</h1>

<div class="card">
  <div class="grid">
    <div>
      <label>A LENS (mm)</label>
      <input id="aLens" type="number" step="0.1" min="0.1" placeholder="e.g. 36">
    </div>

    <div>
      <label>B LENS (mm)</label>
      <input id="bLens" type="number" step="0.1" min="0.1" placeholder="e.g. 29">
    </div>

    <div>
      <label>A DISTANCE</label>
      <input id="aDist" placeholder="6’7” | 6’ 7” | 6 feet 7 | 79in">
    </div>

    <div>
      <label>B DISTANCE</label>
      <input id="bDist" placeholder="leave blank to solve">
    </div>
  </div>

  <button id="calcBtn">CALCULATE</button>
</div>

<div class="card">
  <div class="out" id="result">—</div>
  <div class="muted" id="detail">
    Enter any 3 fields, leave 1 blank, press CALCULATE.
  </div>
</div>

<script>
  const el = id => document.getElementById(id);
  const isBlank = s => s === null || s === undefined || String(s).trim() === "";

  function normalizeInput(s){
    return String(s)
      .replace(/[’′]/g,"'")
      .replace(/[“”″]/g,'"')
      .replace(/feet|foot/g,"ft")
      .replace(/inches|inch/g,"in")
      .toLowerCase()
      .trim();
  }

  function parseDistanceToInches(raw){
    if (isBlank(raw)) return NaN;
    let s = normalizeInput(raw).replace(/\s+/g," ");

    let m;
    if (m = s.match(/^(\d+(?:\.\d+)?)\s*(in|")$/)) return +m[1];

    if (m = s.match(/^(\d+(?:\.\d+)?)\s*(ft|')\s*(\d+(?:\.\d+)?)?/)){
      return (+m[1] * 12) + (m[3] ? +m[3] : 0);
    }

    if (m = s.match(/^(\d+(?:\.\d+)?)\s+(\d+(?:\.\d+)?)$/)){
      return (+m[1] * 12) + (+m[2]);
    }

    if (m = s.match(/^(\d+(?:\.\d+)?)$/)) return +m[1];

    return NaN;
  }

  // DISTANCE: always round UP to whole inches
  function inchesToFeetInString(totalInches){
    if (!(totalInches >= 0)) return "";

    const roundedUp = Math.ceil(totalInches);
    const ft = Math.floor(roundedUp / 12);
    const inch = roundedUp % 12;

    return `${ft}’${inch}”`;
  }

  function clearSolved(){
    ['aDist','bDist','aLens','bLens']
      .forEach(id => el(id).classList.remove('solvedTarget'));
  }

  function normalizeDistanceField(id){
    const v = el(id).value;
    if (isBlank(v)) return;
    const inches = parseDistanceToInches(v);
    if (!(inches > 0)) return;
    el(id).value = inchesToFeetInString(inches);
  }

  function solve(){
    clearSolved();

    normalizeDistanceField('aDist');
    normalizeDistanceField('bDist');

    const aD = el('aDist').value;
    const bD = el('bDist').value;
    const aL = el('aLens').value;
    const bL = el('bLens').value;

    const blanks = [
      isBlank(aL) ? 'aLens' : null,
      isBlank(bL) ? 'bLens' : null,
      isBlank(aD) ? 'aDist' : null,
      isBlank(bD) ? 'bDist' : null
    ].filter(Boolean);

    if (blanks.length !== 1){
      el('result').textContent = "—";
      el('detail').textContent =
        "Enter any 3 fields, leave 1 blank, press CALCULATE.";
      return;
    }

    const A = parseFloat(aL);
    const B = parseFloat(bL);
    const aIn = parseDistanceToInches(aD);
    const bIn = parseDistanceToInches(bD);
    const t = blanks[0];

    if (t === 'bDist' && aIn > 0 && A > 0 && B > 0){
      const v = inchesToFeetInString(aIn * (B / A));
      el('bDist').value = v;
      el('bDist').classList.add('solvedTarget');
      el('result').innerHTML = `B DISTANCE = <span class="bold">${v}</span>`;
      el('detail').textContent = "B = A × (B LENS ÷ A LENS)";
    }

    if (t === 'aDist' && bIn > 0 && A > 0 && B > 0){
      const v = inchesToFeetInString(bIn * (A / B));
      el('aDist').value = v;
      el('aDist').classList.add('solvedTarget');
      el('result').innerHTML = `A DISTANCE = <span class="bold">${v}</span>`;
      el('detail').textContent = "A = B × (A LENS ÷ B LENS)";
    }

    // LENS: always round UP to whole mm
    if (t === 'bLens' && aIn > 0 && bIn > 0 && A > 0){
      const v = Math.ceil(A * (bIn / aIn));
      el('bLens').value = v;
      el('bLens').classList.add('solvedTarget');
      el('result').innerHTML = `B LENS = <span class="bold">${v} mm</span>`;
      el('detail').textContent = "B = A × (B DISTANCE ÷ A DISTANCE)";
    }

    if (t === 'aLens' && aIn > 0 && bIn > 0 && B > 0){
      const v = Math.ceil(B * (aIn / bIn));
      el('aLens').value = v;
      el('aLens').classList.add('solvedTarget');
      el('result').innerHTML = `A LENS = <span class="bold">${v} mm</span>`;
      el('detail').textContent = "A = B × (A DISTANCE ÷ B DISTANCE)";
    }
  }

  el('calcBtn').addEventListener('click', solve);
</script>

</body>
</html>
